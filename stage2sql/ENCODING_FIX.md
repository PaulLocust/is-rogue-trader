# Решение проблемы с кодировкой WIN1251 -> UTF-8

## Проблема

При выполнении SQL скриптов возникает ошибка:
```
ОШИБКА: для символа с последовательностью байт 0x98 из кодировки "WIN1251" нет эквивалента в "UTF8"
```

## Причина

Файлы сохранены в кодировке Windows-1251 (WIN1251), а PostgreSQL ожидает UTF-8.

## Решение

Все SQL файлы были переписаны с использованием только ASCII и UTF-8 символов:

### Исправленные файлы:
- ✅ `create_functions.sql` - переписан на английский язык
- ✅ `create_triggers.sql` - переписан на английский язык  
- ✅ `test_data.sql` - переписан на английский язык

### Изменения:
- Русские комментарии заменены на английские
- Русские строковые литералы заменены на английские
- Все специальные символы заменены на ASCII-эквиваленты

## Использование

Теперь можно выполнять скрипты без проблем:

```bash
psql -U postgres -d is_rogue_trader -f create_functions.sql
psql -U postgres -d is_rogue_trader -f create_triggers.sql
psql -U postgres -d is_rogue_trader -f test_data.sql
```

Или использовать `run_all.sql` для выполнения всех скриптов сразу.

## Примечание

Файл `test_functions.sql` все еще содержит русские символы, так как это тестовый файл. 
Если возникнут проблемы, можно:
1. Запустить его отдельно после настройки кодировки БД
2. Или переписать его на английский язык аналогично другим файлам

## Альтернативное решение

Если нужно сохранить русские символы, можно:

1. Установить кодировку БД в WIN1251:
```sql
ALTER DATABASE is_rogue_trader SET client_encoding = 'WIN1251';
```

2. Или конвертировать файлы в UTF-8 перед выполнением:
```bash
iconv -f WINDOWS-1251 -t UTF-8 create_functions.sql > create_functions_utf8.sql
```

Но рекомендуется использовать исправленные файлы с английским текстом для лучшей совместимости.

